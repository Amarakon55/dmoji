#!/bin/sh

help() {
    printf "Usage:	dmoji [option]

Options:
-i|--icon   │ Get the unicode icon (default)
-n|--number │ Get the unicode number
\n"
}

cmd() {
    [ ! -d ~/.cache/dmoji ] && mkdir -p ~/.cache/dmoji
    [ ! -f ~/.cache/dmoji/emojis.txt ] && wget -O ~/.cache/dmoji/emojis.txt https://unicode.org/Public/emoji/14.0/emoji-test.txt
    cat ~/.cache/dmoji/emojis.txt | tail --lines=+35 | dmenu -l 10
}

icon() {
    cmd | awk '{print $5}' | tr -d '\n' | xclip -r -i -selection clipboard
}

number() {
    cmd | cut -d ' ' -f 1 | tr '\n' ';' | xclip -r -i -selection clipboard
}

if [ "$1" = "-h" -o "$1" = "--help" ]; then
    help
elif [ "$1" = "-n" -o "$1" = "--number" ]; then
    number
elif [ "$1" = "-i" -o "$1" = "--icon" ]; then
    icon
else
    icon
fi
